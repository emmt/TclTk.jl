<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Callbacks · a Julia interface to Tcl/Tk</title><meta name="title" content="Callbacks · a Julia interface to Tcl/Tk"/><meta property="og:title" content="Callbacks · a Julia interface to Tcl/Tk"/><meta property="twitter:title" content="Callbacks · a Julia interface to Tcl/Tk"/><meta name="description" content="Documentation for a Julia interface to Tcl/Tk."/><meta property="og:description" content="Documentation for a Julia interface to Tcl/Tk."/><meta property="twitter:description" content="Documentation for a Julia interface to Tcl/Tk."/><meta property="og:url" content="https://juliainterop.github.io//TclTk.jl/callbacks/"/><meta property="twitter:url" content="https://juliainterop.github.io//TclTk.jl/callbacks/"/><link rel="canonical" href="https://juliainterop.github.io//TclTk.jl/callbacks/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">a Julia interface to Tcl/Tk</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../objects/">Tcl objects</a></li><li><a class="tocitem" href="../lists/">Lists of Tcl objects</a></li><li><a class="tocitem" href="../interpreters/">Tcl interpreters</a></li><li class="is-active"><a class="tocitem" href>Callbacks</a><ul class="internal"><li><a class="tocitem" href="#Simple-callback-example"><span>Simple callback example</span></a></li><li><a class="tocitem" href="#Callback-constructor-arguments"><span>Callback constructor arguments</span></a></li><li><a class="tocitem" href="#Callback-return-value"><span>Callback return value</span></a></li><li><a class="tocitem" href="#Callback-properties"><span>Callback properties</span></a></li><li><a class="tocitem" href="#GUI-callback-example"><span>GUI callback example</span></a></li></ul></li><li><a class="tocitem" href="../widgets/">Widgets</a></li><li><a class="tocitem" href="../dialogs/">Dialogs</a></li><li><a class="tocitem" href="../images/">Tk images</a></li><li><a class="tocitem" href="../public/">Public API</a></li><li><a class="tocitem" href="../develop/">Internal API for developers</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Callbacks</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Callbacks</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaInterop/TclTk.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaInterop/TclTk.jl/blob/main/docs/src/callbacks.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Callbacks"><a class="docs-heading-anchor" href="#Callbacks">Callbacks</a><a id="Callbacks-1"></a><a class="docs-heading-anchor-permalink" href="#Callbacks" title="Permalink"></a></h1><p>A callback is a Julia functions associated to a command in a given Tcl interpreter. Whenever the associated command is executed by the Tcl interpreter, the Julia function is called with the command arguments (a list of Tcl objects).</p><h2 id="Simple-callback-example"><a class="docs-heading-anchor" href="#Simple-callback-example">Simple callback example</a><a id="Simple-callback-example-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-callback-example" title="Permalink"></a></h2><p>To show how callbacks work, we start with a simple example:</p><pre><code class="language-julia-repl hljs">julia&gt; function myfunc(interp::TclInterp, args::TclObj)
           io = stdout
           print(io, &quot;Called with arguments: &quot;)
           show(io, args)
       end
myfunc (generic function with 1 method)

julia&gt; cb = TclTk.Callback(myfunc, &quot;jl_myfunc&quot;)
TclTk.Callback: `myfunc` (in Julia) =&gt; &quot;::jl_myfunc&quot; (in Tcl)

julia&gt; TclTk.exec(Nothing, &quot;jl_myfunc&quot;, :arg1, 2, 3.0, &quot;4th arg&quot;)
Called with arguments: TclObj((&quot;jl_myfunc&quot;, &quot;arg1&quot;, 2, 3.0, &quot;4th arg&quot;,))
</code></pre><p>In the above example:</p><ul><li><p>A Julia function is defined with the expected signature for a callback. When this function is called, <code>interp</code> is the calling Tcl interpreter and <code>args</code> is a Tcl list of objects. The first element of <code>args</code> is the name of the calling Tcl command while subsequent elements in <code>args</code> are the arguments given to the command.</p></li><li><p>The constructor <code>TclTk.Callback</code> is called to associate the Julia function with a new command named <code>&quot;jl_myfunc&quot;</code> in a Tcl interpreter. Since no interpreter is specified in this example, the shared Tcl interpreter of the thread is assumed.</p></li><li><p>The command is executed by <a href="../public/#TclTk.Impl.exec"><code>TclTk.exec</code></a> with a number of arguments to demonstrate how they are transmitted to the Julia function.</p></li></ul><h2 id="Callback-constructor-arguments"><a class="docs-heading-anchor" href="#Callback-constructor-arguments">Callback constructor arguments</a><a id="Callback-constructor-arguments-1"></a><a class="docs-heading-anchor-permalink" href="#Callback-constructor-arguments" title="Permalink"></a></h2><p>The <code>TclTk.Callback</code> constructor may be called with up to 3 arguments:</p><ul><li><p>A mandatory Julia function. This function is called when the associated Tcl command is executed.</p></li><li><p>An optional Tcl interpreter assumed to be the shared interpreter of the thread by default. The associated Tcl command lives in this interpreter.</p></li><li><p>An optional command name. A name of the form <code>&quot;jl_func_$n&quot;</code> is automatically generated by default with <code>$n</code> a unique integer. For a callback <code>cb</code>, the actual command name is given by <code>cb.name</code> even though the command is renamed.</p></li></ul><h2 id="Callback-return-value"><a class="docs-heading-anchor" href="#Callback-return-value">Callback return value</a><a id="Callback-return-value-1"></a><a class="docs-heading-anchor-permalink" href="#Callback-return-value" title="Permalink"></a></h2><p>A Tcl command shall return 2 things: a <em>status</em> (a value of type <a href="../public/#TclTk.Impl.TclStatus"><code>TclStatus</code></a>) and a <em>result</em>. If the <em>status</em> is <code>TCL_OK</code>, the command is assumed to be successful with a returned value given by the <em>result</em>. If the <em>status</em> is <code>TCL_ERROR</code>, the command is assumed to have failed with an error message given by the <em>result</em>. To reflect this behavior, a callback function may return:</p><ul><li><p>A 2-tuple <code>(status::TclStatus, result)</code> to specify both the status and the result.</p></li><li><p>A <code>status</code> of type <a href="../public/#TclTk.Impl.TclStatus"><code>TclStatus</code></a> to assume an empty result. This is the same as returning the 2-tuple <code>(status, &quot;&quot;)</code>.</p></li><li><p>A <code>result</code> of any other type than <a href="../public/#TclTk.Impl.TclStatus"><code>TclStatus</code></a> to assume a successful status. This is the same as returning the 2-tuple <code>(TCL_OK, result)</code>.</p></li><li><p><code>nothing</code> (as <code>myfunc</code> in the above example) to assume a successful status and an empty result. This is the same as returning the 2-tuple <code>(TCL_OK, &quot;&quot;)</code>.</p></li></ul><p>Furthermore, any exception thrown by the callback function is catch and reported to the calling interpreter with a <code>TCL_ERROR</code> status and a result set with the error message.</p><h2 id="Callback-properties"><a class="docs-heading-anchor" href="#Callback-properties">Callback properties</a><a id="Callback-properties-1"></a><a class="docs-heading-anchor-permalink" href="#Callback-properties" title="Permalink"></a></h2><p>A callback, say <code>cb</code>, has the following properties:</p><ul><li><p><code>cb.func</code> is the Julia function of the callback.</p></li><li><p><code>cb.interp</code> is the Tcl interpreter where lives the command associated with the callback.</p></li><li><p><code>cb.name</code> is the name of the Tcl command associated with the callback. This name is prefixed by the full namespace path so that it can be used in any Tcl script and from any Tcl namespace. Hence, this name always starts by <code>&quot;::&quot;</code>.</p></li><li><p><code>cb.token</code> is a private address used by the Tcl interpreter to find the command (whatever its name).</p></li></ul><p>Tcl commands may be renamed in their interpreter, e.g. by calling the <code>rename</code> Tcl command. If the callback command is renamed, the property <code>cb.name</code> keeps track of the full command name.</p><h2 id="GUI-callback-example"><a class="docs-heading-anchor" href="#GUI-callback-example">GUI callback example</a><a id="GUI-callback-example-1"></a><a class="docs-heading-anchor-permalink" href="#GUI-callback-example" title="Permalink"></a></h2><p>As another callback example, we build a simple Graphical User Interface (GUI) where the location of mouse clicks are reported:</p><pre><code class="language-julia-repl hljs">julia&gt; tk_start(); # make sure Tk package is loaded and event loop is running

julia&gt; top = TkToplevel(:background =&gt; &quot;#282c34&quot;)
TkToplevel(&quot;.top1&quot;)

julia&gt; TclTk.exec(Nothing, :wm, :title, top, &quot;Callback demo&quot;)

julia&gt; canvas = TkCanvas(top, :background =&gt; &quot;#282c34&quot;, :cursor =&gt; :target)
TkCanvas(&quot;.top1.cnv1&quot;)

julia&gt; mesg = TkMessage(top, :aspect =&gt; 600)
TkMessage(&quot;.top1.msg1&quot;)

julia&gt; TclTk.pack(Nothing, canvas, :side =&gt; :top, :fill =&gt; &quot;both&quot;, :expand =&gt; true)

julia&gt; TclTk.pack(Nothing, mesg, :side =&gt; :bottom, :fill =&gt; &quot;x&quot;, :expand =&gt; false)

julia&gt; function on_click(interp::TclInterp, args::TclObj)
           # Extract arguments (4 expected).
           cmd = args[1 =&gt; String]  # the name of the calling command
           win = args[2 =&gt; String]  # the widget name, %W in the bind script
           xm = args[3 =&gt; Float64] # the x coordinate of the event, %x in the bind script
           ym = args[4 =&gt; Float64] # the y coordinate of the event, %x in the bind script
           # Convert (xm,ym) to canvas coordinates.
           x = interp(Float64, win, :canvasx, xm)
           y = interp(Float64, win, :canvasy, xm)
           # Set message.
           s = &quot;Mouse clicked at ($xm, $ym) with canvas coordinates ($x, $y).&quot;
           interp(Nothing, mesg, :configure, :text =&gt; s)
       end
on_click (generic function with 1 method)

julia&gt; cb = TclTk.Callback(on_click)
TclTk.Callback: `on_click` (in Julia) =&gt; &quot;::jl_func_1&quot; (in Tcl)

julia&gt; TclTk.exec(Nothing, :bind, canvas, &quot;&lt;ButtonPress-1&gt;&quot;, (cb.name, &quot;%W&quot;, &quot;%x&quot;, &quot;%y&quot;))
</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../interpreters/">« Tcl interpreters</a><a class="docs-footer-nextpage" href="../widgets/">Widgets »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.17.0 on <span class="colophon-date" title="Sunday 1 March 2026 18:39">Sunday 1 March 2026</span>. Using Julia version 1.12.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
